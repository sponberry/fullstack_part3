(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),r=t.n(c),o=t(3),s=t(2),i=t(4),a=t.n(i),u="/api/persons",d=function(e){return a.a.post(u,e).then((function(e){return e.data}))},f=function(){return a.a.get(u).then((function(e){return e.data}))},j=function(e){return a.a.delete("".concat(u,"/").concat(e)).then((function(e){return e.status}))},l=function(e,n){return a.a.put("".concat(u,"/").concat(n),e).then((function(e){return e.data}))},b=t(0),h=function(e){var n=e.persons,t=e.entries,c=e.setPersons,r=e.setMessageConfig,o=function(e,n){r(["".concat(e," ").concat(n),"red"]),setTimeout((function(){r(!1)}),5e3)},s=function(e){var t=e.target.value,r=n.find((function(e){return e.id===t})).name;window.confirm("This will delete ".concat(r," permanently"))&&(j(t).then((function(e){console.log("Status ".concat(e," on contact id ").concat(t)),o(r,"has been deleted from the server")})).catch((function(e){o(r,"not found. Entry already been removed from the server")})),c(n.filter((function(e){return e.id!==t}))))};return n.map((function(e){return t.test(e.name.toLowerCase())?Object(b.jsxs)("li",{children:[e.name," ",e.number,Object(b.jsx)("button",{onClick:s,value:e.id,children:"delete"})]},e.name):null}))},O=t(6),m=function(e){var n=e.persons,t=e.setPersons,c=e.setMessageConfig,r=Object(s.useState)(""),i=Object(o.a)(r,2),a=i[0],u=i[1],f=Object(s.useState)(""),j=Object(o.a)(f,2),h=j[0],m=j[1],p=function(){return setTimeout((function(){c(!1)}),5e3)},v=function(){c(["Success! ".concat(a," has been successfully added to the phonebook"),"green"]),p()},g=function(e){c(["".concat(e.error),"red"]),p()};return Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=n.find((function(e){return e.name.toLowerCase()===a.toLowerCase()}));c?window.confirm("".concat(a," is already an entry in the phonebook, replace number?"))&&l(Object(O.a)(Object(O.a)({},c),{},{number:h}),c.id).then((function(e){t(n.map((function(n){return n.id!==e.id?n:e}))),v()})).catch((function(e){g(e.response.data),t(n.filter((function(e){return e.id!==c.id})))})):d({name:a,number:h}).then((function(e){t(n.concat(e)),v()})).catch((function(e){g(e.response.data),t(n.filter((function(e){return e.id!==c.id})))}));u(""),m("")},children:[Object(b.jsxs)("div",{children:["name:",Object(b.jsx)("input",{value:a,onChange:function(e){return u(e.target.value)}})]}),Object(b.jsxs)("div",{children:["number:",Object(b.jsx)("input",{value:h,onChange:function(e){return m(e.target.value)}})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.entriesToShow,t=e.setEntriesToShow;return Object(b.jsxs)("div",{children:["filter shown with",Object(b.jsx)("input",{value:n,onChange:function(e){return t(e.target.value)}})]})},v=function(e){var n=e.message,t={color:n[1],display:"inline-block",fontStyle:"monospace",fontSize:18,marginBottom:10,padding:10,border:"solid 2px"};return n?Object(b.jsx)("div",{style:t,children:n[0]}):null},g=function(){var e=Object(s.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(s.useState)(""),i=Object(o.a)(r,2),a=i[0],u=i[1],d=Object(s.useState)(!1),j=Object(o.a)(d,2),l=j[0],O=j[1],g=new RegExp(".*"+a.toLowerCase()+".*");return Object(s.useEffect)((function(){f().then((function(e){return c(e)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(v,{message:l}),Object(b.jsx)(p,{entriesToShow:a,setEntriesToShow:u}),Object(b.jsx)("h2",{children:"Add new"}),Object(b.jsx)(m,{persons:t,setPersons:c,setMessageConfig:O}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)("ul",{children:Object(b.jsx)(h,{persons:t,entries:g,setPersons:c,setMessageConfig:O})})]})};t(39);r.a.render(Object(b.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f81054d1.chunk.js.map