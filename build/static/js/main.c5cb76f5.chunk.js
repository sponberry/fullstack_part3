(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),o=t.n(c),r=t(3),s=t(2),a=t(4),i=t.n(a),u="/api/persons",d=function(e){return i.a.post(u,e).then((function(e){return e.data}))},f=function(){return i.a.get(u).then((function(e){return e.data}))},j=function(e){return i.a.delete("".concat(u,"/").concat(e)).then((function(e){return e.status}))},b=function(e,n){return i.a.put("".concat(u,"/").concat(n),e).then((function(e){return e.data}))},l=t(0),h=function(e){var n=e.persons,t=e.entries,c=e.setPersons,o=e.setMessageConfig,r=function(e,n){o(["".concat(e," ").concat(n),"red"]),setTimeout((function(){o(!1)}),5e3)},s=function(e){var t=e.target.value,o=n.find((function(e){return e.id===t})).name;window.confirm("This will delete ".concat(o," permanently"))&&(j(t).then((function(e){console.log("Status ".concat(e," on contact id ").concat(t)),r(o,"has been deleted from the server")})).catch((function(e){r(o,"not found. Entry already been removed from the server")})),c(n.filter((function(e){return e.id!==t}))))};return n.map((function(e){return t.test(e.name.toLowerCase())?Object(l.jsxs)("li",{children:[e.name," ",e.number,Object(l.jsx)("button",{onClick:s,value:e.id,children:"delete"})]},e.name):null}))},O=t(6),m=function(e){var n=e.persons,t=e.setPersons,c=e.setMessageConfig,o=Object(s.useState)(""),a=Object(r.a)(o,2),i=a[0],u=a[1],f=Object(s.useState)(""),j=Object(r.a)(f,2),h=j[0],m=j[1],p=function(){return setTimeout((function(){c(!1)}),5e3)},v=function(){c(["Success! ".concat(i," has been successfully added to the phonebook"),"green"]),p()},g=function(e){c(["".concat(e.error),"red"]),p()};return Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=n.find((function(e){return e.name.toLowerCase()===i.toLowerCase()}));c?window.confirm("".concat(i," is already an entry in the phonebook, replace number?"))&&b(Object(O.a)(Object(O.a)({},c),{},{number:h}),c.id).then((function(e){t(n.map((function(n){return n.id!==e.id?n:e}))),v()})).catch((function(e){g(e.response.data)})):d({name:i,number:h}).then((function(e){t(n.concat(e)),v()})).catch((function(e){g(e.response.data)}));u(""),m("")},children:[Object(l.jsxs)("div",{children:["name:",Object(l.jsx)("input",{value:i,onChange:function(e){return u(e.target.value)}})]}),Object(l.jsxs)("div",{children:["number:",Object(l.jsx)("input",{value:h,onChange:function(e){return m(e.target.value)}})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.entriesToShow,t=e.setEntriesToShow;return Object(l.jsxs)("div",{children:["filter shown with",Object(l.jsx)("input",{value:n,onChange:function(e){return t(e.target.value)}})]})},v=function(e){var n=e.message,t={color:n[1],display:"inline-block",fontStyle:"monospace",fontSize:18,marginBottom:10,padding:10,border:"solid 2px"};return n?Object(l.jsx)("div",{style:t,children:n[0]}):null},g=function(){var e=Object(s.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],o=Object(s.useState)(""),a=Object(r.a)(o,2),i=a[0],u=a[1],d=Object(s.useState)(!1),j=Object(r.a)(d,2),b=j[0],O=j[1],g=new RegExp(".*"+i.toLowerCase()+".*");return Object(s.useEffect)((function(){f().then((function(e){return c(e)}))}),[]),Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(v,{message:b}),Object(l.jsx)(p,{entriesToShow:i,setEntriesToShow:u}),Object(l.jsx)("h2",{children:"Add new"}),Object(l.jsx)(m,{persons:t,setPersons:c,setMessageConfig:O}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)("ul",{children:Object(l.jsx)(h,{persons:t,entries:g,setPersons:c,setMessageConfig:O})})]})};t(39);o.a.render(Object(l.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.c5cb76f5.chunk.js.map